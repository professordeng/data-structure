---
title: the use of tree
---

## 1.二叉树排序

### 1.1 二叉排序树的定义

二叉排序树（BST），也称二叉查找树。二叉排序树或者是一棵空树，或者是一棵具有下列特性的非空二叉树。

1. 若左子树非空，则左子树上所有结点关键字值均小于根结点的关键字值。
2. 若右子树非空，则右子树上所有结点关键字值均大于根结点的关键字值。
3. 左、右子树本身也分别是一棵二叉排序树。

可以看出，二叉排序树是一个递归的数据结构，可以方便地使用递归算法对二叉排序树进行各种运算。

根据定义，利用中序遍历可以得到一个递增的有序序列。

### 1.2 二叉排序树的查找

从根结点开始，若等于结点关键字值查找成功，小于结点关键字值往左找，大于结点关键字值往右找。

可以很简单地实现非递归和递归算法（首选非递归）

### 1.3 二叉排序树的插入

二叉排序树作为一个动态集合，其特点是树的结构通常不是一次生成的，而是在查找过程中，当树中不存在关键字值等于给定值的结点时再进行插入的。

由于二叉排序树是递归定义的，因此插入结点的过程如下：若原二叉排序树为空，则直接插入结点；否则，若关键字 k 小于根结点关键字，则插入左子树，若关键字 k 大于根结点关键字，则插入右子树。

### 1.4 二叉排序树的构造

依次将数据元素插入即可

### 1.5 二叉排序树的删除

在二叉树中删除一个结点时，不能把以该结点为根的子树上的结点都删除，必须先把被删除结点从存储二叉树的链表上摘下，将因删除结点而断开的二叉链表重新链接起来，同时确保二叉排序树的性质不会丢失。分三种情况

1. 若被删除结点是叶结点，则直接删除，不会破坏二叉排序树的性质。
2. 若结点 z 只有一棵左子树或右子树，则让 z 的子树成为 z 父结点的子树，替代 z 的位置。
3. 若结点 z 有左、右子树，则令 z 的直接后继（或直接前驱）替代 z ，然后从二叉排序树中删除这个直接后继（或直接前驱），这样就转换成了第一或第二种情况。

### 1.6 二叉排序树的查找效率分析

对于高度为 h 的二叉排序树，其插入和删除操作的运行时间都是 O(h)。但在最坏情况下，即构造二叉排序树的输入序列是有序的，则会形成一个倾斜的单支树，此时二叉排序树的性能显著变坏，树的高度也增加为元素个数 n。所以，二叉排序树查找查找算法的平均查找长度与二叉树的形态有关。

若二叉树是一个只有右（左）孩子的单支树（类似于有序的单链表），则其平均查找长度和单链表相同，为 O(n) 。若二叉树的左右子树的高度之差的绝对值不超过 1，则这样的二叉排序树称为平衡二叉树。它的平均查找长度达到 O(log2n) 。

从查找过程看，二叉排序树与二分查找相似。就平均时间性能而言，二叉排序树上的查找和二分查找差不多。但二分查找的判定树唯一，而二叉排序树的查找不唯一，相同的关键字其插入顺序不同可能产生不同的二叉排序树。

就维护表的有序性而言，二叉排序树无须移动结点，只需修改指针即可完成插入和删除操作，平均执行时间为 O(log2n)。二分查找的对象是有序顺序表，若有插入和删除结点的操作，所花的代价为 O(n) 。当有序表是静态查找表（元素个数固定）时，宜用顺序表作为其存储结构，而采用二分查找实现其查找操作；若有序表是动态查找表，则应选择二叉排序树作为其逻辑结构。

## 2. 平衡二叉树

### 2.1 平衡二叉树的定义

为避免树的高度增长过快，降低二叉排序树的性能，我们规定在插入和删除二叉树结点时，要保证任意结点的左、右子树高度差的绝对值不超过 1，将这样的二叉树称为平衡二叉树（Balanced Binary Tree），简称平衡树（AVL）。定义结点左子树和右子树的高度差为该结点的平衡因子，则平衡二叉树结点的平衡因子的值只可能是 -1，0 或 1 。

### 2.2 平衡二叉树的插入

二叉排序树保证平衡的基本思想如下：每当在二叉排序树中插入（或删除）一个结点时，首先检查其插入路径上的结点是否因为此次操作而导致了不平衡。若导致了不平衡，则先找到插入路径上离插入结点最近的平衡因子的绝对值大于 1 的结点 A，再对以 A 为根的子树，再保持二叉排序树特性的前提下，调整各结点的位置关系，使之重新达到平衡。

注意：每次调整的对象都是最小不平衡子树，即以插入路径上离插入结点最近的平衡因子的绝对值大于 1 的结点作为根的子树。

平衡二叉树的插入过程的前半部分与二叉排序树相同，但在新结点插入后，若造成查找路径上的某个结点不再平衡，则需要做出相应的调整。一般可将失去平衡后进行调整的规律归纳为下列 4 种情况。

1. LL 平衡旋转
2. RR 平衡旋转
3. LR 平衡旋转
4. RL 平衡旋转

### 2.3 平衡二叉树的查找

在平衡二叉树上进行查找的过程与二叉排序树的相同。因此，在查找过程中，与给定值进行比较的关键字个数不超过树的深度。假设以 nh 表示深度为 h 的平衡树中含有的最少结点数。显然，有 n0=0，呢 n1=1，n2=2，并且有 `nh = n_(h-1) + n_(h-2) +1`  。可以证明，含有 n 个结点的平衡二叉树的最大深度为 O(log^2n) ，因此平衡二叉树的平均查找长度为 O(log2n)。

注意：该结论可用于求解给定结点数的平衡二叉树的查找所需的最多比较次数（或树的最大高度）。在含有 12 个结点的平衡二叉树中查找某个结点的最多比较次数是 5 次。

## 3. 哈夫曼树和哈夫曼编码

